
sages_combined <- readRDS(file=fs::path(r_objects_folder, "020_sages_combined.rds"))
outcome_variables <- readRDS(file=fs::path(r_objects_folder, "020_outcome_variables.rds"))

variable_df <- var_label(sages_combined) %>%
  enframe() %>%
  unnest(cols = c(value)) %>%
  rename(covariates_all = name) %>%
  rename(variable_label = value)

# covariates_all <- names(sages_combined)
# variable_df <- tibble(covariates_all)

# covariates_to_use_1: variable list similar to (but not the same as) the list used in Jones (2021)
# covariates_to_use_2: variable list that contains labs from more days and some variables that were considered hard
#   for clinicians to assess
# covariates_to_use_3: variable list similar to covariates_to_use_2 but uses continuous lab values instead of indicators
# covariates_to_use_4: after 2024-02-06 meeting: variable list similar to covariates_to_use_3, adds apache, keeps cci as continuous, drops the comorbidity variables, drops imaging abnormality variable

variable_df <- variable_df %>%
  mutate(covariates_to_use_1 = covariates_all %in% c(outcome_variables,
                                                     "vdage", "vdfemale", "vdnonwhite", "vdesl", "vd3ms", "vdeduc_r",
                                                     "vdbmi3", "vdlivesalone", "vdsmokingstatus",  "vdalcohol",
                                                     "vdadlany", "vdiadlany", "vdiadlanyc", "vdiqc_proxy", "vdgds15",
                                                     "vdhearingimp", "vdfriedfrail1", "vdfriedfrail4", "vdfriedfrail5", 
                                                     "vdsurg", "vdcci", "vdcci3", "vdvascom", 
                                                     "comorbid.diab_mod", "comorbid.tumor", "comorbid.pvd", "comorbid.mi", "comorbid.ctd", 
                                                     "comorbid.crd", "comorbid.cs",  "comorbid.diab_sev", "comorbid.chf", "comorbid.stroke",
                                                     "ins02", "ins03", "ins04", "ins05", "dep01", "op01_3", "vdanesth_spi",
                                                     "lab01a", "lab02a", "lab03a", "lab04a", "lab05a",
                                                     "lab06a", "lab.anion.gap.1", "lab10a", "lab11a", "lab12a", "lab13a",
                                                     "lab.corrected.calcium.1", "lab09a", "lab.bun.cre.ratio.1", "lab15a",
                                                     "lab.wbc.1.lo", "lab.wbc.1.hi", "lab.hct.1.lo", "lab.hct.1.hi", "lab.cre.1.hi", 
                                                     "lab.sod.1.lo", "lab.sod.1.hi", "lab.pot.1.lo", "lab.pot.1.hi", "lab.alt.1.hi", 
                                                     "lab.ast.1.hi", "lab.bil.1.hi", "lab.bun.cre.1.hi", "lab.o2.1.lo"),
         covariates_to_use_2 = covariates_all %in% c(outcome_variables,
                                                     "vdage", "vdfemale", "vdnonwhite", "vdeduc_r", "vdlivesalone", 
                                                     "vdsmokingstatus", "vdalcohol", "vdbmi3", "vdesl",
                                                     "vdmlta_metmins", 
                                                     "vdadlany", "vdiadlany", "vdiadlanyc", "vdgds15", 
                                                     "vdsf12pcs", "vdsf12mcs", "vdsf12pf", "vdsf12rp", "vdsf12bp",
                                                     "vdsf12gh", "vdsf12vt", "vdsf12sf", "vdsf12re", "vdsf12mh", 
                                                     "vdhearingimp", "vddrisk93_1", 
                                                     "vdfriedfrail1", "vdfriedfrail2", "vdfriedfrail3", "vdfriedfrail4", "vdfriedfrail5",
                                                     "vd3ms", "vdgcp_rta", "wtar01", "vdiqc_proxy",
                                                     "vdcrp_preop", "vdcrp_pod2", "apoe4", 
                                                     "ins01", "ins02", "ins03", "ins04", "ins05", "ci01", "dep01",
                                                     "lab.wbc.1.abnormal", "lab.hct.1.abnormal", "lab.bun.1.abnormal", "lab.cre.1.abnormal", 
                                                     "lab.sod.1.abnormal", "lab.pot.1.abnormal", "lab.chl.1.abnormal", "lab.bic.1.abnormal", 
                                                     "lab.glu.1.abnormal", "lab.alt.1.abnormal", "lab.ast.1.abnormal", "lab.bil.1.abnormal", 
                                                     "lab.alb.1.abnormal", "lab.cal.1.abnormal", "lab.o2.1.abnormal", "lab.bun.cre.1.abnormal", 
                                                     "lab.anion.1.abnormal",
                                                     "lab.wbc.2.abnormal", "lab.hct.2.abnormal", "lab.bun.2.abnormal", "lab.cre.2.abnormal", 
                                                     "lab.sod.2.abnormal", "lab.pot.2.abnormal", "lab.bic.2.abnormal", "lab.o2.2.abnormal", 
                                                     "lab.agb.2.abnormal", "lab.po2.2.abnormal", "lab.pco2.2.abnormal", 
                                                     "lab.hct.3.abnormal", "lab.bun.3.abnormal", "lab.cre.3.abnormal", "lab.sod.3.abnormal", 
                                                     "comorbid.diab_mod", "comorbid.tumor", "comorbid.pvd", "comorbid.mi", "comorbid.ctd",
                                                     "comorbid.crd", "comorbid.cs", "comorbid.diab_sev", "comorbid.chf", "comorbid.stroke", 
                                                     "vdvascom", "vdcci3", "vdsurg", "op01_3", "vdanesth_spi",
                                                     "vdp41101", "vdp41301", "vdp41302", "vdp41303", "vdp41304",               
                                                     "vdp41305", "vdp41311", "vdp41312", "vdp41313", "vdp41314",               
                                                     "vdp41315", "vdp41316", "vdp41317", "vdp41318", "vdp41319",               
                                                     "vdp41320", "vdp41321", "vdp41322", "vdp41323", "vdp41324",               
                                                     "vdp41325", "vdp41326", "vdp41327", "vdp41328", "vdp41329",               
                                                     "vdp41330", "vdp41331", "vdp41501", "vdp41502", "vdp41503",               
                                                     "vdp41504", "vdp41505", "vdp41506", "vdp41507", "vdp41508",               
                                                     "vdp41509", "vdp41510", "vdp41511", "vdp41512", "vdp41513",               
                                                     "vdp41514", "vdp41515", "vdp41516", "vdp41721", "vdp41722",               
                                                     "vdp41723", "vdp41724", "vdp41725", "vdp41726", "vdp41727",               
                                                     "vdp41901", "vdp42101", "vdp42303", "vdp42304", "vdp42305",               
                                                     "vdp42309", "vdp42701", "vdp42702", "vdp42901", "vdp42902",               
                                                     "vdp42903", "vdp42904", "vdp42905", "vdp42906", "vdp43101",               
                                                     "vdp43301", "vdp44701"    ),
         covariates_to_use_3 = covariates_all %in% c(outcome_variables,
                                                     "vdage", "vdfemale", "vdnonwhite", "vdeduc_r", "vdlivesalone", 
                                                     "vdsmokingstatus", "vdalcohol", "vdbmi3", "vdesl",
                                                     "vdmlta_metmins", 
                                                     "vdadlany", "vdiadlany", "vdiadlanyc", "vdgds15", 
                                                     "vdsf12pcs", "vdsf12mcs", "vdsf12pf", "vdsf12rp", "vdsf12bp",
                                                     "vdsf12gh", "vdsf12vt", "vdsf12sf", "vdsf12re", "vdsf12mh", 
                                                     "vdhearingimp", "vddrisk93_1", 
                                                     "vdfriedfrail1", "vdfriedfrail2", "vdfriedfrail3", "vdfriedfrail4", "vdfriedfrail5",
                                                     "vd3ms", "vdgcp_rta", "wtar01", "vdiqc_proxy",
                                                     "vdcrp_preop", "vdcrp_pod2", "apoe4", 
                                                     "ins01", "ins02", "ins03", "ins04", "ins05", "ci01", "dep01",
                                                     "lab01a", "lab02a", "lab03a", "lab04a", "lab05a", "lab06a", "lab07a", "lab08a",
                                                     "lab09a", "lab10a", "lab11a", "lab12a", "lab13a", "lab14a", "lab15a", 
                                                     "lab.corrected.calcium.1", "lab.bun.cre.ratio.1", "lab.anion.gap.1",
                                                     "lab01c", "lab02c", "lab03c", "lab04c", "lab05c", "lab06c", "lab08c", 
                                                     "lab15c", "lab16c", "lab17c", "lab18c", 
                                                     "lab02e", "lab03e", "lab04e", "lab05e", 
                                                     "comorbid.diab_mod", "comorbid.tumor", "comorbid.pvd", "comorbid.mi", "comorbid.ctd",
                                                     "comorbid.crd", "comorbid.cs", "comorbid.diab_sev", "comorbid.chf", "comorbid.stroke", 
                                                     "vdvascom", "vdcci3", "vdsurg", "op01_3", "vdanesth_spi",
                                                     "vdp41101", "vdp41301", "vdp41302", "vdp41303", "vdp41304",               
                                                     "vdp41305", "vdp41311", "vdp41312", "vdp41313", "vdp41314",               
                                                     "vdp41315", "vdp41316", "vdp41317", "vdp41318", "vdp41319",               
                                                     "vdp41320", "vdp41321", "vdp41322", "vdp41323", "vdp41324",               
                                                     "vdp41325", "vdp41326", "vdp41327", "vdp41328", "vdp41329",               
                                                     "vdp41330", "vdp41331", "vdp41501", "vdp41502", "vdp41503",               
                                                     "vdp41504", "vdp41505", "vdp41506", "vdp41507", "vdp41508",               
                                                     "vdp41509", "vdp41510", "vdp41511", "vdp41512", "vdp41513",               
                                                     "vdp41514", "vdp41515", "vdp41516", "vdp41721", "vdp41722",               
                                                     "vdp41723", "vdp41724", "vdp41725", "vdp41726", "vdp41727",               
                                                     "vdp41901", "vdp42101", "vdp42303", "vdp42304", "vdp42305",               
                                                     "vdp42309", "vdp42701", "vdp42702", "vdp42901", "vdp42902",               
                                                     "vdp42903", "vdp42904", "vdp42905", "vdp42906", "vdp43101",               
                                                     "vdp43301", "vdp44701"    ),
         covariates_to_use_4 = covariates_all %in% c(outcome_variables,
                                                     "vdage", "vdfemale", "vdnonwhite", "vdeduc_r", "vdlivesalone", 
                                                     "vdsmokingstatus", "vdalcohol", "vdbmi3", "vdesl",
                                                     "vdmlta_metmins", 
                                                     "vdadlany", "vdiadlanyc", "vdgds15", 
                                                     "vdsf12pcs", "vdsf12mcs",  
                                                     "vdhearingimp", "vddrisk93_1", 
                                                     "vdfriedfrail1", "vdfriedfrail2", "vdfriedfrail3", "vdfriedfrail4", "vdfriedfrail5",
                                                     "vd3ms", "vdgcp_rta", "wtar01", "vdiqc_proxy",
                                                     "vdcrp_preop", "vdcrp_pod2", "apoe4", 
                                                     "ins01", "ins02", "ins03", "ins04", "ins05", "ci01", "dep01",
                                                     "lab01a", "lab02a", "lab03a", "lab04a", "lab05a", "lab06a", "lab07a", "lab08a",
                                                     "lab09a", "lab10a", "lab11a", "lab12a", "lab13a", "lab14a", "lab15a", 
                                                     "lab.corrected.calcium.1", "lab.bun.cre.ratio.1", "lab.anion.gap.1",
                                                     "lab01c", "lab02c", "lab03c", "lab04c", "lab05c", "lab06c", "lab08c", 
                                                     "lab15c", "lab16c", "lab17c", "lab18c", 
                                                     "lab02e", "lab03e", "lab04e", "lab05e", 
                                                     "vdvascom", "vdcci", "vdapache", "vdsurg", "op01_3", "vdanesth_spi",
                                                     "vdp41101", "vdp41301", "vdp41302", "vdp41303", "vdp41304",               
                                                     "vdp41305", "vdp41311", "vdp41312", "vdp41313", "vdp41314",               
                                                     "vdp41315", "vdp41316", "vdp41317", "vdp41318", "vdp41319",               
                                                     "vdp41320", "vdp41321", "vdp41322", "vdp41323", "vdp41324",               
                                                     "vdp41325", "vdp41326", "vdp41327", "vdp41328", "vdp41329",               
                                                     "vdp41330", "vdp41331", "vdp41501", "vdp41502", "vdp41503",               
                                                     "vdp41504", "vdp41505", "vdp41506", "vdp41507", "vdp41508",               
                                                     "vdp41509", "vdp41510", "vdp41511", "vdp41512", "vdp41513",               
                                                     "vdp41514", "vdp41515", "vdp41516", "vdp41721", "vdp41722",               
                                                     "vdp41723", "vdp41724", "vdp41725", "vdp41726", "vdp41727",               
                                                     "vdp41901", "vdp42101", "vdp42303", "vdp42304", "vdp42305",               
                                                     "vdp42309", "vdp42701", "vdp42702", "vdp42901", "vdp42902",               
                                                     "vdp42903", "vdp42904", "vdp42905", "vdp42906", "vdp43101",               
                                                     "vdp43301"   )
  )



### Save the R objects
saveRDS(variable_df,            file=fs::path(r_objects_folder, "021_variable_df.rds"))

# "studyid", "vdage", "vdfemale", "vdnonwhite",
# "vdeduc_r", "vdlivesalone", "vdsmokingstatus", "vdalcohol",
# "vdmlta_metmins", "vdgcp_rta", "wtar01", "vdadlany",
# "vdiadlany", "vdiadlanyc", "vdgds15", "vdsf12pcs",
# "vdsf12mcs", "vdsf12pf", "vdsf12rp", "vdsf12bp",
# "vdsf12gh", "vdsf12vt", "vdsf12sf", "vdsf12re",
# "vdsf12mh", "vdhearingimp", "vddrisk93_1", "vdfriedfrail1",
# "vdfriedfrail2", "vdfriedfrail3", "vdfriedfrail4", "vdfriedfrail5",
# "vdsurg", "vdcrp_preop", "vdcrp_pod2", "vd3ms",
# "vdbmi3", "vdesl", "apoe4", "vdsagesdeliriumever",
# "vdiqc_proxy", "vdgcp_slope36m", "vdgcp_slope48m", "vdcci",
# "vdvascom", "ins01", "ins02", "ins03",
# "ins04", "ins05", "ci01", "dep01",
# "lab01a", "lab02a", "lab03a", "lab04a",
# "lab05a", "lab06a", "lab07a", "lab08a",
# "lab09a", "lab10a", "lab11a", "lab12a",
# "lab13a", "lab14a", "lab15a", "lab01c",
# "lab02c", "lab03c", "lab04c", "lab05c",
# "lab06c", "lab08c", "lab15c", "lab16c",
# "lab17c", "lab18c", "lab02e", "lab03e",
# "lab04e", "lab05e", "lab.wbc.1.lo", "lab.wbc.1.hi",
# "lab.hct.1.lo", "lab.hct.1.hi", "lab.bun.1.hi", "lab.cre.1.hi",
# "lab.sod.1.lo", "lab.sod.1.hi", "lab.pot.1.lo", "lab.pot.1.hi",
# "lab.chl.1.lo", "lab.chl.1.hi", "lab.bic.1.lo", "lab.bic.1.hi",
# "lab.glu.1.lo", "lab.glu.1.hi", "lab.alt.1.hi", "lab.ast.1.hi",
# "lab.bil.1.hi", "lab.alb.1.lo", "lab.alb.1.hi", "lab.corrected.calcium.1",
# "lab.cal.1.lo", "lab.cal.1.hi", "lab.o2.1.lo", "lab.bun.cre.ratio.1",
# "lab.anion.gap.1", "lab.bun.cre.1.hi", "lab.anion.1.hi", "lab.wbc.1.abnormal",
# "lab.hct.1.abnormal", "lab.bun.1.abnormal", "lab.cre.1.abnormal", "lab.sod.1.abnormal",
# "lab.pot.1.abnormal", "lab.chl.1.abnormal", "lab.bic.1.abnormal", "lab.glu.1.abnormal",
# "lab.alt.1.abnormal", "lab.ast.1.abnormal", "lab.bil.1.abnormal", "lab.alb.1.abnormal",
# "lab.cal.1.abnormal", "lab.o2.1.abnormal", "lab.bun.cre.1.abnormal", "lab.anion.1.abnormal",
# "lab.wbc.2.lo", "lab.wbc.2.hi", "lab.hct.2.lo", "lab.hct.2.hi",
# "lab.bun.2.hi", "lab.cre.2.hi", "lab.sod.2.lo", "lab.sod.2.hi",
# "lab.pot.2.lo", "lab.pot.2.hi", "lab.bic.2.lo", "lab.bic.2.hi",
# "lab.o2.2.lo", "lab.agb.2.lo", "lab.agb.2.hi", "lab.po2.2.lo",
# "lab.pco2.2.lo", "lab.pco2.2.hi", "lab.wbc.2.abnormal", "lab.hct.2.abnormal",
# "lab.bun.2.abnormal", "lab.cre.2.abnormal", "lab.sod.2.abnormal", "lab.pot.2.abnormal",
# "lab.bic.2.abnormal", "lab.o2.2.abnormal", "lab.agb.2.abnormal", "lab.po2.2.abnormal",
# "lab.pco2.2.abnormal", "lab.hct.3.lo", "lab.hct.3.hi", "lab.bun.3.hi",
# "lab.cre.3.hi", "lab.sod.3.lo", "lab.sod.3.hi", "lab.hct.3.abnormal",
# "lab.bun.3.abnormal", "lab.cre.3.abnormal", "lab.sod.3.abnormal", "comorbid.diab_mod",
# "comorbid.tumor", "comorbid.pvd", "comorbid.mi", "comorbid.ctd",
# "comorbid.crd", "comorbid.cs", "comorbid.diab_sev", "comorbid.chf",
# "comorbid.stroke", "vdcci3", "op01_3", "vdanesth_spi", 
# "vdp41101", "vdp41301", "vdp41302", "vdp41303", "vdp41304",               
# "vdp41305", "vdp41311", "vdp41312", "vdp41313", "vdp41314",               
# "vdp41315", "vdp41316", "vdp41317", "vdp41318", "vdp41319",               
# "vdp41320", "vdp41321", "vdp41322", "vdp41323", "vdp41324",               
# "vdp41325", "vdp41326", "vdp41327", "vdp41328", "vdp41329",               
# "vdp41330", "vdp41331", "vdp41501", "vdp41502", "vdp41503",               
# "vdp41504", "vdp41505", "vdp41506", "vdp41507", "vdp41508",               
# "vdp41509", "vdp41510", "vdp41511", "vdp41512", "vdp41513",               
# "vdp41514", "vdp41515", "vdp41516", "vdp41721", "vdp41722",               
# "vdp41723", "vdp41724", "vdp41725", "vdp41726", "vdp41727",               
# "vdp41901", "vdp42101", "vdp42303", "vdp42304", "vdp42305",               
# "vdp42309", "vdp42701", "vdp42702", "vdp42901", "vdp42902",               
# "vdp42903", "vdp42904", "vdp42905", "vdp42906", "vdp43101",               
# "vdp43301", "vdp44701"           



